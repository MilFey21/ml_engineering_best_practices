# HW6: Документация и отчеты

## Описание задания

Создание полной документации проекта и системы генерации отчетов для проекта предсказания оттока клиентов.

## Выполненные требования

### 1. Техническая документация 

#### ✅ Создана документация с помощью MkDocs

- Настроен MkDocs с темой Material
- Создана полная структура документации:
  - Getting Started (установка, быстрый старт, примеры)
  - Руководство по развертыванию (локальное, Docker, ClearML)
  - Документация API (модели, утилиты)
  - Эксперименты (обзор, результаты, сравнение)
  - Воспроизводимость (инструкции, DVC, ClearML)

**Файлы:**
- `mkdocs.yml` - конфигурация MkDocs
- `docs/docs/` - исходники документации

#### ✅ Создано руководство по развертыванию

Созданы подробные руководства:
- [Руководство по развертыванию](https://milfey21.github.io/ml_engineering_best_practices/deployment/) - включает локальное развертывание, Docker и ClearML Server
- [Начало работы](https://milfey21.github.io/ml_engineering_best_practices/getting-started/) - установка и примеры использования
- [Результаты экспериментов](https://milfey21.github.io/ml_engineering_best_practices/experiments/results/) - отчеты и визуализации
- [Воспроизводимость](https://milfey21.github.io/ml_engineering_best_practices/reproducibility/instructions/) - инструкции по воспроизведению результатов

#### ✅ Настроена автоматическая генерация документации

- GitHub Actions workflow для автоматической публикации на GitHub Pages
- Файл: `.github/workflows/docs.yml`
- Документация автоматически обновляется при каждом push в main ветку
- Локальная сборка через `pixi run docs-build`
- Локальный просмотр через `pixi run docs-serve`

![Report](figures/docs_serve.png)

![Report](figures/docs_local.png)

![Report](figures/docs_experiments.png)

#### ✅ Созданы примеры использования

Создан раздел с примерами использования всех основных функций проекта:
- Базовое обучение модели
- Обучение с ClearML
- Запуск экспериментов
- Использование Hydra
- Версионирование данных
- Регистрация моделей
- Сравнение моделей
- Работа с пайплайнами

**Файл:** `docs/docs/getting-started/examples.md`

### 2. Публикация в Git Pages

#### ✅ Настроен GitHub Actions для автоматической публикации

Создан workflow `.github/workflows/docs.yml` который:
- Автоматически собирает документацию при изменениях
- Публикует на GitHub Pages
- Работает при push в main ветку и при pull requests

**Особенности:**
- Использует официальные GitHub Actions для Pages
- Поддерживает concurrency для предотвращения конфликтов
- Автоматически обновляется при изменениях в документации

#### ✅ Создан сайт с документацией на Git Pages

![Report](figures/docs_ui.png)

Документация доступна по адресу:
`https://MilFey21.github.io/ml_engineering_best_practices/`

**Структура сайта:**
- Главная страница с обзором проекта
- Getting Started - установка и быстрый старт
- Руководство по развертыванию
- Документация API
- Эксперименты и результаты
- Воспроизводимость

#### ✅ Настроено автоматическое обновление при изменениях

- Документация автоматически обновляется при каждом push в main ветку
- Изменения в `docs/` или `mkdocs.yml` триггерят пересборку
- Pull requests показывают preview документации

### 3. Отчеты об экспериментах

#### ✅ Созданы отчеты об экспериментах в формате Markdown

Создан скрипт `scripts/generate_experiment_report.py` для автоматической генерации отчетов:
- Извлекает результаты из ClearML
- Создает сравнительные таблицы по метрикам
- Сохраняет в формате Markdown

**Пример использования:**
```bash
pixi run generate-report
```

![Report](figures/report_bash.png)

**Experiment report example** `reports/experiments/experiment_report.md`

![Report](figures/report_md.png)
![Report](figures/report_graphs.png)


#### ✅ Добавлены графики и визуализации результатов

- Отчеты включают сравнительные таблицы моделей
- Метрики представлены в удобном формате
- Поддержка множественных метрик (F1-Score, Accuracy, Precision, Recall, ROC-AUC)
- **Автоматическое скачивание и встраивание графиков из ClearML в отчеты**

**Графики доступны в:**
- ClearML UI (confusion matrix, метрики)
- Отчетах в формате Markdown (автоматически скачиваются и встраиваются)

![Report](figures/confusion_matrix.png)
![Combined Metrics Plot](experiments\plots\task_c276b00d12ce42c0841653fc0c9a11e9\combined_metrics.png)

**Функциональность графиков:**
- Автоматическое скачивание графиков метрик из топовых экспериментов
- Визуализация confusion matrix и других изображений
- Сохранение графиков в `reports/experiments/plots/`
- Встраивание графиков в markdown-отчеты
- Опция `--no-plots` для генерации отчетов без графиков

#### ✅ Созданы сравнительные таблицы экспериментов

Скрипт автоматически создает сравнительные таблицы:
- Топ-N моделей по каждой метрике
- Информация о модели, задаче, метриках, дате создания, тегах
- Форматирование в Markdown таблицах

#### ✅ Настроена автоматическая генерация отчетов

- GitHub Actions workflow `.github/workflows/reports.yml` для автоматической генерации
- Запускается при изменениях в коде или по расписанию (еженедельно)
- Автоматически коммитит отчеты в репозиторий

**Команды:**
```bash
pixi run generate-report        # Генерация одного отчета
pixi run generate-all-reports   # Генерация всех отчетов
```

### 4. Воспроизводимость 

#### ✅ Созданы инструкции по воспроизведению

Создан раздел документации с подробными инструкциями:
- Пошаговое руководство по воспроизведению результатов
- Инструкции по использованию DVC
- Инструкции по использованию ClearML
- Устранение проблем

**Файлы:**
- `docs/docs/reproducibility/instructions.md`
- `docs/docs/reproducibility/dvc.md`
- `docs/docs/reproducibility/clearml.md`

#### ✅ Создан README с полным описанием

Обновлен `README.md` с:
- Полным описанием проекта
- Инструкциями по установке и использованию
- Информацией о воспроизводимости
- Ссылками на документацию
- Структурой проекта
- Полезными ссылками

#### ✅ Настроена автоматическая сборка документации

- GitHub Actions автоматически собирает документацию
- Локальная сборка через `pixi run docs-build`
- Локальный просмотр через `pixi run docs-serve`

![Report](figures/report_md.png)



## Структура документации

```
docs/
├── docs/
│   ├── index.md                    # Главная страница
│   ├── getting-started/
│   │   ├── installation.md         # Установка
│   │   ├── quickstart.md           # Быстрый старт
│   │   └── examples.md             # Примеры использования
│   ├── deployment/
│   │   ├── overview.md             # Обзор развертывания
│   │   ├── local.md                # Локальное развертывание
│   │   ├── docker.md               # Docker развертывание
│   │   └── clearml.md              # ClearML Server
│   ├── api/
│   │   ├── overview.md             # Обзор API
│   │   ├── models.md               # API моделей
│   │   └── utils.md                # API утилит
│   ├── experiments/
│   │   ├── overview.md             # Обзор экспериментов
│   │   ├── results.md              # Результаты
│   │   └── comparison.md           # Сравнение моделей
│   └── reproducibility/
│       ├── instructions.md         # Инструкции по воспроизведению
│       ├── dvc.md                  # DVC
│       └── clearml.md              # ClearML
└── mkdocs.yml                      # Конфигурация MkDocs
```

## GitHub Actions Workflows

### 1. Документация (`.github/workflows/docs.yml`)

**Триггеры:**
- Push в main ветку (изменения в `docs/` или `mkdocs.yml`)
- Pull requests
- Ручной запуск

**Действия:**
- Установка зависимостей
- Сборка документации
- Публикация на GitHub Pages

### 2. Отчеты (`.github/workflows/reports.yml`)

**Триггеры:**
- Push в main ветку (изменения в `src/` или `scripts/`)
- Ручной запуск
- По расписанию (еженедельно)

**Действия:**
- Генерация отчетов об экспериментах
- Автоматический коммит отчетов

## Команды для работы с документацией

```bash
# Сборка документации
pixi run docs-build

# Локальный просмотр
pixi run docs-serve

# Публикация на GitHub Pages
pixi run docs-deploy

# Генерация отчетов
pixi run generate-report
pixi run generate-all-reports
```

## Автоматизация

Все процессы автоматизированы:

1. **Документация** - автоматически публикуется при изменениях
2. **Отчеты** - автоматически генерируются при изменениях в коде или по расписанию
3. **Воспроизводимость** - все инструкции включены в документацию



